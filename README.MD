# GoFrame Demo Project

这是一个基于 **GoFrame v2.9.0** 框架构建的单体应用项目，主要实现了用户管理和Hello接口的Web API服务。

## 快速开始

- GoFrame官方文档: https://goframe.org/quick
- 启动项目: `go run main.go`

## 项目架构

### 技术栈
- **框架**: GoFrame v2.9.0
- **数据库**: MySQL (使用官方MySQL驱动)
- **API文档**: OpenAPI 3.0 规范
- **部署**: 支持Docker + Kubernetes

### 分层架构
```
API层 → Controller层 → Service/Logic层 → DAO层 → Database
```

## 📁 目录结构详解

### 🔧 根目录配置文件
```
.
├── go.mod              # Go模块依赖管理
├── go.sum              # 依赖版本锁定文件
├── main.go             # 程序入口文件
├── api.json            # OpenAPI 3.0规范的API文档
├── Makefile            # 构建和部署脚本
└── README.MD           # 项目说明文档
```

### 📡 API接口定义层 (`api/`)
```
api/
├── hello/
│   ├── hello.go        # Hello模块通用定义
│   └── v1/hello.go     # Hello模块v1版本API结构体
└── user/
    ├── user.go         # User模块通用定义  
    └── v1/user.go      # User模块v1版本API结构体(请求/响应)
```

**作用**: 
- 定义API接口的请求和响应结构体
- 使用GoFrame的`g.Meta`标签定义路由、方法、验证规则等
- 按模块和版本组织，便于API版本管理

### 🏗️ 内部业务逻辑层 (`internal/`)

#### 🚀 命令行启动层 (`internal/cmd/`)
```
internal/cmd/
└── cmd.go              # HTTP服务器启动命令，配置路由和中间件
```

#### 🎮 控制器层 (`internal/controller/`)
```
internal/controller/
├── hello/
│   ├── hello.go              # Hello控制器基础定义
│   ├── hello_new.go          # Hello控制器构造函数
│   └── hello_v1_hello.go     # Hello v1版本具体处理逻辑
└── user/
    ├── user.go               # User控制器基础定义
    ├── user_new.go           # User控制器构造函数
    ├── user_v1_create.go     # 创建用户处理逻辑
    ├── user_v1_delete.go     # 删除用户处理逻辑
    ├── user_v1_get_list.go   # 获取用户列表处理逻辑
    ├── user_v1_get_one.go    # 获取单个用户处理逻辑
    └── user_v1_update.go     # 更新用户处理逻辑
```

**作用**:
- 处理HTTP请求路由
- 调用service层业务逻辑
- 按功能模块拆分文件，便于维护

#### 📊 数据模型层 (`internal/model/`)
```
internal/model/
├── do/user.go          # Data Object - 数据库操作对象
└── entity/user.go      # Entity - 数据库表对应的实体结构体
```

**作用**:
- **entity**: 数据库表映射的Go结构体（通过GoFrame工具自动生成）
- **do**: 数据库操作时使用的对象

#### 💾 数据访问层 (`internal/dao/`)
```
internal/dao/
├── user.go             # User数据访问对象定义
└── internal/user.go    # User数据访问内部实现
```

**作用**:
- 封装数据库CRUD操作
- 提供统一的数据访问接口

#### 📦 其他内部模块
```
internal/
├── consts/             # 常量定义
├── logic/              # 业务逻辑层
├── service/            # 服务层
└── packed/             # 资源文件打包
```

### 🚀 部署运维相关

#### 📋 部署配置 (`manifest/`)
```
manifest/
├── config/
│   └── config.yaml                 # 应用配置文件
├── deploy/kustomize/               # Kubernetes部署配置
│   ├── base/                      # 基础部署配置
│   │   ├── deployment.yaml
│   │   ├── service.yaml
│   │   └── kustomization.yaml
│   └── overlays/develop/          # 开发环境覆盖配置
│       ├── configmap.yaml
│       ├── deployment.yaml
│       └── kustomization.yaml
├── docker/                        # Docker容器化
│   ├── Dockerfile
│   └── docker.sh
├── i18n/                          # 国际化文件
└── protobuf/                      # Protocol Buffers定义
```

#### 🔧 开发工具 (`hack/`)
```
hack/
├── config.yaml         # 开发配置
├── hack-cli.mk         # CLI工具makefile
└── hack.mk             # 开发脚本makefile
```

#### 📱 静态资源 (`resource/`)
```
resource/
├── public/                        # 公共静态文件
│   ├── html/                     # HTML文件
│   ├── plugin/                   # 插件文件
│   └── resource/                 # 资源文件
│       ├── css/                  # 样式文件
│       ├── image/                # 图片资源
│       └── js/                   # JavaScript文件
└── template/                     # 模板文件
```

#### 🛠️ 工具函数 (`utility/`)
```
utility/                          # 工具函数库
```

## 🌟 架构特点

1. **🏗️ 分层架构**: 清晰的分层设计，职责分离
2. **📦 模块化设计**: 按业务模块（hello、user）组织代码
3. **🔄 版本管理**: API按版本（v1）管理，便于向后兼容
4. **🤖 自动生成**: entity和dao代码可通过GoFrame工具自动生成
5. **🐳 容器化支持**: 完整的Docker和Kubernetes部署配置
6. **📏 标准化**: 遵循GoFrame框架的项目结构规范

## 🔍 主要功能模块

### Hello模块
- `GET /hello` - 简单的Hello接口

### User模块  
- `POST /user` - 创建用户
- `GET /user` - 获取用户列表（支持年龄和状态筛选）
- `GET /user/{id}` - 获取单个用户信息
- `PUT /user/{id}` - 更新用户信息
- `DELETE /user/{id}` - 删除用户

## 📖 开发指南

1. **API接口开发流程**:
   ```
   1. 在 api/模块名/v1/ 中定义接口结构体
   2. 在 internal/controller/模块名/ 中实现控制器逻辑
   3. 在 internal/service/ 中实现业务逻辑（可选）
   4. 在 internal/dao/ 中实现数据访问逻辑
   ```

2. **数据库表生成**:
   ```bash
   # 使用GoFrame CLI工具生成entity和dao
   gf gen dao
   ```

3. **API文档更新**:
   ```bash
   # 生成OpenAPI文档
   gf gen openapi
   ```

这是一个典型的GoFrame企业级项目结构，具备良好的可扩展性、可维护性和标准化程度。