# https://goframe.org/docs/web/server-config-file-template
server:
  address:     ":8000"
  openapiPath: "/api.json"
  swaggerPath: "/swagger"

# https://goframe.org/docs/core/glog-config
logger:
  level : "info"        # æ—¥å¿—çº§åˆ«: debug, info, notice, warning, error, fatal, all
  stdout: true

  # æ–‡ä»¶è¾“å‡ºé…ç½®
  path: "logs"              # æ—¥å¿—æ–‡ä»¶å­˜å‚¨ç›®å½•
  file: "app.log"           # å½“å‰æ—¥å¿—æ–‡ä»¶ï¼ˆä¸åŠ æ—¥æœŸï¼‰

  # æ»šåŠ¨é…ç½® - ç”Ÿäº§ç¯å¢ƒè®¾ç½®
  rotateSize: "20MB"        # å•ä¸ªæ—¥å¿—æ–‡ä»¶å¤§å°é™åˆ¶: 20M
  rotateBackupLimit: 5      # ä¿ç•™å†å²æ—¥å¿—æ–‡ä»¶æ•°é‡: 5ä¸ª
  rotateBackupExpire: "30d" # å†å²æ—¥å¿—æ–‡ä»¶è¿‡æœŸæ—¶é—´: 30å¤©
  rotateBackupCompress: true # å‹ç¼©å†å²æ—¥å¿—æ–‡ä»¶

  # æ—¶é—´æ ¼å¼
  timeFormat: "2006-01-02 15:04:05"

  # å…¶ä»–é…ç½®
  flags: "std"              # æ ‡å‡†æ—¥å¿—æ ¼å¼
  writerColorEnable: false  # æ–‡ä»¶è¾“å‡ºä¸ä½¿ç”¨é¢œè‰²

# https://goframe.org/docs/core/gdb-config-file
database:
  default:
    link: "sqlite::@file(./data/sqlite.db)"

# è¾¹ç¼˜è®¾å¤‡é…ç½®
device:
  # id å‚æ•°å·²åˆ é™¤ - ç°åœ¨ä½¿ç”¨ç½‘å¡MACåœ°å€è‡ªåŠ¨ç”Ÿæˆè®¾å¤‡ID
  module: "I-800-RK"        # è®¾å¤‡æ¨¡å—å

  # ğŸ” RuntimeçŠ¶æ€æ£€æµ‹é…ç½®
  runtime:
    port: 1231              # Runtimeè¿›ç¨‹ç›‘å¬ç«¯å£

  # ï¿½ OPC UAæœåŠ¡é…ç½®
  opcua:
    serverPort: 4840        # OPC UAæœåŠ¡å™¨ç«¯å£

  # ï¿½ğŸŒ ç½‘å¡æ£€æµ‹é…ç½®
  network:
    # ç½‘å¡æ£€æµ‹æ¨¡å¼: auto(è‡ªåŠ¨æ£€æµ‹), manual(æ‰‹åŠ¨æŒ‡å®š), config(é…ç½®ä¼˜å…ˆçº§)
    mode: "auto"

    # æ‰‹åŠ¨æŒ‡å®šç½‘å¡ (mode=manualæ—¶ä½¿ç”¨) - éœ€è¦æ—¶å¡«å…¥å…·ä½“å€¼
    interface: ""  # ç½‘å¡åç§°ï¼Œå¦‚ "eth0", "wlan0"
    mac: ""       # MACåœ°å€ï¼Œå¦‚ "AA-BB-CC-DD-EE-FF"
    ip: ""        # IPåœ°å€ï¼Œå¦‚ "192.168.1.100"

    # ç½‘å¡ä¼˜å…ˆçº§ (mode=configæ—¶ä½¿ç”¨)
    priority:
      - "eth0"      # æœ‰çº¿ç½‘å¡ä¼˜å…ˆ
      - "ens"       # Ubuntuç½‘å¡
      - "enp"       # æ–°ç‰ˆUbuntuç½‘å¡
      - "wlan"      # æ— çº¿ç½‘å¡
      - "wlp"       # æ–°ç‰ˆæ— çº¿ç½‘å¡

    # è¿é€šæ€§æµ‹è¯•é…ç½®
    connectivity:
      timeout: 3    # è¿æ¥æµ‹è¯•è¶…æ—¶æ—¶é—´(ç§’)
      retries: 2    # æµ‹è¯•é‡è¯•æ¬¡æ•°

# MQTTæœåŠ¡é…ç½®
mqtt:
  # ğŸ”— è¿æ¥é…ç½®
  # broker: "tcp://broker.emqx.io:1883"  # å…¬å…±æµ‹è¯•MQTTæœåŠ¡å™¨
  # broker: "tcp://10.77.26.5:16003"       # ä½ çš„MQTTæœåŠ¡å™¨åœ°å€ï¼ˆè¿æ¥æµ‹è¯•ï¼‰
  broker: "tcp://113.249.91.53:1886"       # ä½ çš„MQTTæœåŠ¡å™¨åœ°å€ï¼ˆæ­£å¼ç¯å¢ƒï¼‰
  # clientId å‚æ•°å·²åˆ é™¤ - ç°åœ¨ä½¿ç”¨ edge-{MACåœ°å€} æ ¼å¼è‡ªåŠ¨ç”Ÿæˆ

  # ğŸ”„ å¯é æ€§é…ç½®
  keepAlive: 60           # å¿ƒè·³é—´éš”ï¼ˆç§’ï¼‰
  pingTimeout: 10         # pingè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  connectTimeout: 30      # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  autoReconnect: true     # å¯ç”¨è‡ªåŠ¨é‡è¿
  maxReconnectInterval: 60 # æœ€å¤§é‡è¿é—´éš”ï¼ˆç§’ï¼‰
  connectRetryInterval: 5  # é‡è¿é—´éš”ï¼ˆç§’ï¼‰
  connectRetry: true      # å¯ç”¨è¿æ¥é‡è¯•
  cleanSession: false     # æŒä¹…ä¼šè¯ï¼Œé‡è¿åæ¢å¤è®¢é˜…

  # ğŸ¥ å¥åº·æ£€æŸ¥é…ç½®
  healthCheck:
    enable: true          # å¯ç”¨å¥åº·æ£€æŸ¥
    interval: 30          # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰

  # ğŸ“¡ ä¸»é¢˜é…ç½®
  topics:
    algorithm:
      request: "/sys/i800/{deviceId}/request"   # ç®—æ³•ä¸‹å‘è¯·æ±‚ä¸»é¢˜
      reply: "/sys/i800/{deviceId}/reply"       # ç®—æ³•ä¸‹å‘å“åº”ä¸»é¢˜

    # ğŸ·ï¸ è®¾å¤‡æ³¨å†Œä¸»é¢˜é…ç½®
    device:
      register: "/sys/i800/{deviceId}/event/register"  # è®¾å¤‡æ³¨å†Œä¸»é¢˜

  # ğŸ·ï¸ è®¾å¤‡æ³¨å†Œé…ç½®
  register:
    enable: true            # å¯ç”¨è®¾å¤‡æ³¨å†ŒåŠŸèƒ½
    onConnect: true         # è¿æ¥æˆåŠŸæ—¶è‡ªåŠ¨æ³¨å†Œ
    onReconnect: true      # é‡è¿æˆåŠŸæ—¶è‡ªåŠ¨æ³¨å†Œ
    retryInterval: 30      # æ³¨å†Œå¤±è´¥é‡è¯•é—´éš”(ç§’)
    maxRetries: 3          # æœ€å¤§é‡è¯•æ¬¡æ•°

# ç®—æ³•ä¸‹è½½é…ç½®
algorithm:
  downloadPath: ""  # ç•™ç©ºå°†è‡ªåŠ¨æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©è·¯å¾„
  # Windows: ./runtime/algorithm
  # Linux: /usr/runtime/algorithm
  # ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®š: "D:/algorithms" æˆ– "/opt/algorithms"
